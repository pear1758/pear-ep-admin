import{d as k,r as x,c as D,a as W,w as z,o as J,p as E,b as H,e as v,T as Q,i as Z,f as ee,n as ne,v as te,g as ue,h as F,j as N,k as R,u as g,l as $,m as oe,q as re,s as K,_ as ie}from"./index-858e4013.js";var G=function(e,n){var i,o=n.arg;if(!o){console.error("参数有误");return}var a=n.value,d=ue(o)?o.value:(i=n.instance)===null||i===void 0?void 0:i.$refs[o];if(!d){console.error("没有找到 ".concat(o," 对应的实例"));return}if(typeof d.addReference!="function"){console.error("".concat(o," 对应的实例不是 VContextmenu"));return}e.$contextmenuKey=o,d.addReference(e,a)},U=function(e,n){var i,o=e.$contextmenuKey;if(o){var a=(i=n.instance)===null||i===void 0?void 0:i.$refs[o];a==null||a.removeReference(e)}},ae=function(e,n){U(e,n),G(e,n)},ce={mounted:G,updated:ae,beforeUnmount:U},h={contextmenu:"v-contextmenu",contextmenuIcon:"v-contextmenu-icon",contextmenuInner:"v-contextmenu-inner",contextmenuDivider:"v-contextmenu-divider",contextmenuItem:"v-contextmenu-item",contextmenuItemHover:"v-contextmenu-item--hover",contextmenuItemDisabled:"v-contextmenu-item--disabled",contextmenuGroup:"v-contextmenu-group",contextmenuGroupTitle:"v-contextmenu-group__title",contextmenuGroupMenus:"v-contextmenu-group__menus",contextmenuSubmenu:"v-contextmenu-submenu",contextmenuSubmenuTitle:"v-contextmenu-submenu__title",contextmenuSubmenuMenus:"v-contextmenu-submenu__menus",contextmenuSubmenuMenusTop:"v-contextmenu-submenu__menus--top",contextmenuSubmenuMenusRight:"v-contextmenu-submenu__menus--right",contextmenuSubmenuMenusBottom:"v-contextmenu-submenu__menus--bottom",contextmenuSubmenuMenusLeft:"v-contextmenu-submenu__menus--left",contextmenuSubmenuArrow:"v-contextmenu-submenu__arrow"};function le(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ee(t)}var se={trigger:["contextmenu"]},de=k({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}}},emits:["show","hide","update:modelValue"],setup:function(e,n){var i=n.emit,o=x(null),a=x(e.modelValue||!1),d=function(u){a.value=u,i("update:modelValue",u)},_=x({top:0,left:0}),M=D(function(){return{top:"".concat(_.value.top,"px"),left:"".concat(_.value.left,"px")}}),w=x(null),l=function(u,c){var r=u instanceof Event?c:u,y=(r==null?void 0:r.autoAjustPlacement)||e.autoAjustPlacement,s={top:(r==null?void 0:r.top)||0,left:(r==null?void 0:r.left)||0};if(u instanceof Event){var b,I;u.preventDefault(),s.top=(b=r==null?void 0:r.top)!==null&&b!==void 0?b:u.pageY,s.left=(I=r==null?void 0:r.left)!==null&&I!==void 0?I:u.pageX}d(!0),ne(function(){if(y){var O=o.value;if(!O)return;var j=O.clientWidth,P=O.clientHeight;if(P+s.top>=window.innerHeight+window.scrollY){var L=s.top-P;L>window.scrollY&&(s.top=L)}if(j+s.left>=window.innerWidth+window.scrollX){var T=s.left-j;T>window.scrollX&&(s.left=T)}}_.value=s,i("show")})},m=function(){w.value=null,d(!1),i("hide")},C=W(new Map),p=x(),S=D(function(){return p.value&&C.get(p.value)}),Y=function(u,c){var r=function(){return c!=null&&c.trigger?Array.isArray(c.trigger)?c.trigger:[c.trigger]:se.trigger}(),y=function(b){e.disabled||(p.value=u,l(b,{}))};r.forEach(function(s){u.addEventListener(s,y)}),C.set(u,{triggers:r,handler:y})},q=function(u){var c=C.get(u);c&&(c.triggers.forEach(function(r){u.removeEventListener(r,c.handler)}),C.delete(u))},B=function(u){if(!(!u.target||!o.value||!p.value)){var c=o.value.contains(u.target)||S.value&&S.value.triggers.includes("click")&&p.value.contains(u.target);c||d(!1)}};return z(a,function(f){f?document.addEventListener("click",B):document.removeEventListener("click",B)}),J(function(){document.removeEventListener("click",B)}),E("visible",a),E("autoAjustPlacement",e.autoAjustPlacement),E("show",l),E("hide",m),{visible:a,style:M,currentReferenceOptions:S,currentOptions:w,contextmenuRef:o,addReference:Y,removeReference:q,toggle:d,show:l,hide:m}},methods:{renderContent:function(){var e,n;return H(v("div",{class:h.contextmenu,ref:"contextmenuRef",style:this.style},[v("ul",{class:h.contextmenuInner},[(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[te,"visible"]])}},render:function(){var e;return this.visible?this.teleport?v(Q,{to:this.teleport},le(e=this.renderContent())?e:{default:function(){return[e]}}):this.renderContent():null}});function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V=k({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0}},emits:["click","mouseenter","mouseleave"],setup:function(e,n){var i=n.emit,o=Z("hide"),a=x(!1),d=D(function(){var l;return l={},A(l,h.contextmenuItem,!0),A(l,h.contextmenuItemDisabled,e.disabled),A(l,h.contextmenuItemHover,a.value),l}),_=function(m){e.disabled||(i("click",m),e.hideOnClick&&(o==null||o()))},M=function(m){e.disabled||(a.value=!0,i("mouseenter",m))},w=function(m){e.disabled||(a.value=!1,i("mouseleave",m))};return{classes:d,handleClick:_,handleMouseenter:M,handleMouseleave:w}},render:function(){var e,n;return v("li",{class:this.classes,onClick:this.handleClick,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n)])}}),ve=k({name:"VContextmenuDivider",render:function(){return v("li",{class:h.contextmenuDivider},null)}});const X=t=>(oe("data-v-55d2214c"),t=t(),re(),t),me={class:"bg-white dark:bg-dark p-4 cursor-pointer"},fe=X(()=>K("div",null,"右键菜单",-1)),xe={class:"flex-c mt-4 box"},he=X(()=>K("span",null,"右键点击此区域",-1)),_e=[he],pe=k({__name:"contextMenu",setup(t){const e={...ce},n=()=>{console.log("click")};return(i,o)=>(F(),N("div",me,[fe,H((F(),N("div",xe,_e)),[[e,void 0,"contextmenu"]]),v(g(de),{ref:"contextmenu"},{default:R(()=>[v(g(V),{onClick:n},{default:R(()=>[$("菜单1")]),_:1}),v(g(ve)),v(g(V),null,{default:R(()=>[$("菜单2")]),_:1}),v(g(V),null,{default:R(()=>[$("菜单3")]),_:1})]),_:1},512)]))}});const ge=ie(pe,[["__scopeId","data-v-55d2214c"]]);export{ge as default};
