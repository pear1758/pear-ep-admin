import{d as k,aK as x,s as V,aI as q,bp as z,as as J,aE as y,bw as N,I as v,T as Q,a9 as Z,ah as ee,am as ne,bm as te,ae as ue,o as F,b as H,bu as R,u as g,H as $,aG as oe,aD as re,w as K,bC as ie}from"./index-CUD07q8U.js";var G=function(e,n){var i,o=n.arg;if(!o){console.error("参数有误");return}var a=n.value,d=ue(o)?o.value:(i=n.instance)===null||i===void 0?void 0:i.$refs[o];if(!d){console.error("没有找到 ".concat(o," 对应的实例"));return}if(typeof d.addReference!="function"){console.error("".concat(o," 对应的实例不是 VContextmenu"));return}e.$contextmenuKey=o,d.addReference(e,a)},U=function(e,n){var i,o=e.$contextmenuKey;if(o){var a=(i=n.instance)===null||i===void 0?void 0:i.$refs[o];a==null||a.removeReference(e)}},ae=function(e,n){U(e,n),G(e,n)},le={mounted:G,updated:ae,beforeUnmount:U},h={contextmenu:"v-contextmenu",contextmenuIcon:"v-contextmenu-icon",contextmenuInner:"v-contextmenu-inner",contextmenuDivider:"v-contextmenu-divider",contextmenuItem:"v-contextmenu-item",contextmenuItemHover:"v-contextmenu-item--hover",contextmenuItemDisabled:"v-contextmenu-item--disabled",contextmenuGroup:"v-contextmenu-group",contextmenuGroupTitle:"v-contextmenu-group__title",contextmenuGroupMenus:"v-contextmenu-group__menus",contextmenuSubmenu:"v-contextmenu-submenu",contextmenuSubmenuTitle:"v-contextmenu-submenu__title",contextmenuSubmenuMenus:"v-contextmenu-submenu__menus",contextmenuSubmenuMenusTop:"v-contextmenu-submenu__menus--top",contextmenuSubmenuMenusRight:"v-contextmenu-submenu__menus--right",contextmenuSubmenuMenusBottom:"v-contextmenu-submenu__menus--bottom",contextmenuSubmenuMenusLeft:"v-contextmenu-submenu__menus--left",contextmenuSubmenuArrow:"v-contextmenu-submenu__arrow"};function ce(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ee(t)}var se={trigger:["contextmenu"]},de=k({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}}},emits:["show","hide","update:modelValue"],setup:function(e,n){var i=n.emit,o=x(null),a=x(e.modelValue||!1),d=function(u){a.value=u,i("update:modelValue",u)},p=x({top:0,left:0}),M=V(function(){return{top:"".concat(p.value.top,"px"),left:"".concat(p.value.left,"px")}}),w=x(null),c=function(u,l){var r=u instanceof Event?l:u,E=(r==null?void 0:r.autoAjustPlacement)||e.autoAjustPlacement,s={top:(r==null?void 0:r.top)||0,left:(r==null?void 0:r.left)||0};if(u instanceof Event){var b,I;u.preventDefault(),s.top=(b=r==null?void 0:r.top)!==null&&b!==void 0?b:u.pageY,s.left=(I=r==null?void 0:r.left)!==null&&I!==void 0?I:u.pageX}d(!0),ne(function(){if(E){var O=o.value;if(!O)return;var P=O.clientWidth,j=O.clientHeight;if(j+s.top>=window.innerHeight+window.scrollY){var L=s.top-j;L>window.scrollY&&(s.top=L)}if(P+s.left>=window.innerWidth+window.scrollX){var T=s.left-P;T>window.scrollX&&(s.left=T)}}p.value=s,i("show")})},m=function(){w.value=null,d(!1),i("hide")},C=q(new Map),_=x(),S=V(function(){return _.value&&C.get(_.value)}),Y=function(u,l){var r=function(){return l!=null&&l.trigger?Array.isArray(l.trigger)?l.trigger:[l.trigger]:se.trigger}(),E=function(b){e.disabled||(_.value=u,c(b,{}))};r.forEach(function(s){u.addEventListener(s,E)}),C.set(u,{triggers:r,handler:E})},W=function(u){var l=C.get(u);l&&(l.triggers.forEach(function(r){u.removeEventListener(r,l.handler)}),C.delete(u))},B=function(u){if(!(!u.target||!o.value||!_.value)){var l=o.value.contains(u.target)||S.value&&S.value.triggers.includes("click")&&_.value.contains(u.target);l||d(!1)}};return z(a,function(f){f?document.addEventListener("click",B):document.removeEventListener("click",B)}),J(function(){document.removeEventListener("click",B)}),y("visible",a),y("autoAjustPlacement",e.autoAjustPlacement),y("show",c),y("hide",m),{visible:a,style:M,currentReferenceOptions:S,currentOptions:w,contextmenuRef:o,addReference:Y,removeReference:W,toggle:d,show:c,hide:m}},methods:{renderContent:function(){var e,n;return N(v("div",{class:h.contextmenu,ref:"contextmenuRef",style:this.style},[v("ul",{class:h.contextmenuInner},[(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[te,"visible"]])}},render:function(){var e;return this.visible?this.teleport?v(Q,{to:this.teleport},ce(e=this.renderContent())?e:{default:function(){return[e]}}):this.renderContent():null}});function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=k({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0}},emits:["click","mouseenter","mouseleave"],setup:function(e,n){var i=n.emit,o=Z("hide"),a=x(!1),d=V(function(){var c;return c={},A(c,h.contextmenuItem,!0),A(c,h.contextmenuItemDisabled,e.disabled),A(c,h.contextmenuItemHover,a.value),c}),p=function(m){e.disabled||(i("click",m),e.hideOnClick&&(o==null||o()))},M=function(m){e.disabled||(a.value=!0,i("mouseenter",m))},w=function(m){e.disabled||(a.value=!1,i("mouseleave",m))};return{classes:d,handleClick:p,handleMouseenter:M,handleMouseleave:w}},render:function(){var e,n;return v("li",{class:this.classes,onClick:this.handleClick,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n)])}}),ve=k({name:"VContextmenuDivider",render:function(){return v("li",{class:h.contextmenuDivider},null)}});const X=t=>(oe("data-v-c8de583d"),t=t(),re(),t),me={class:"bg-white dark:bg-dark p-4 cursor-pointer"},fe=X(()=>K("div",null,"右键菜单",-1)),xe={class:"flex-c mt-4 box"},he=X(()=>K("span",null,"右键点击此区域",-1)),pe=[he],_e=k({__name:"contextMenu",setup(t){const e={...le},n=()=>{console.log("click")};return(i,o)=>(F(),H("div",me,[fe,N((F(),H("div",xe,pe)),[[e,void 0,"contextmenu"]]),v(g(de),{ref:"contextmenu"},{default:R(()=>[v(g(D),{onClick:n},{default:R(()=>[$("菜单1")]),_:1}),v(g(ve)),v(g(D),null,{default:R(()=>[$("菜单2")]),_:1}),v(g(D),null,{default:R(()=>[$("菜单3")]),_:1})]),_:1},512)]))}}),ge=ie(_e,[["__scopeId","data-v-c8de583d"]]);export{ge as default};
