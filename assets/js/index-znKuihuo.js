import{bU as Q,am as R,bV as ye,bW as Ce,d as le,bX as he,bY as Ee,bZ as Be,b_ as we,b$ as Me,c0 as ke,c1 as Te,c2 as Se,s as S,aK as B,aI as Ie,c3 as _,c4 as x,bp as ee,c5 as Ve,aw as Oe,as as Ae,c6 as $e,b6 as Re,aP as w,o as p,a as h,bu as d,bw as N,I as c,w as g,an as i,ap as ne,bz as F,b as z,aR as U,v as I,b1 as $,bx as H,aO as ze,H as b,bm as j,i as Le,c7 as Pe,c8 as De,c9 as re,ah as ie,aM as ue,ca as se,cb as Fe,cc as Ue,bE as oe,cd as te,F as He,aN as Ke,ce as Ne,bH as je}from"./index-CUD07q8U.js";const q="_trap-focus-children",M=[],ae=e=>{if(M.length===0)return;const n=M[M.length-1][q];if(n.length>0&&e.code===ye.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const t=e.shiftKey,r=e.target===n[0],l=e.target===n[n.length-1];r&&t&&(e.preventDefault(),n[n.length-1].focus()),l&&!t&&(e.preventDefault(),n[0].focus())}},qe={beforeMount(e){e[q]=Q(e),M.push(e),M.length<=1&&document.addEventListener("keydown",ae)},updated(e){R(()=>{e[q]=Q(e)})},unmounted(){M.shift(),M.length===0&&document.removeEventListener("keydown",ae)}},Ge=le({name:"ElMessageBox",directives:{TrapFocus:qe},components:{ElButton:he,ElFocusTrap:Ee,ElInput:Be,ElOverlay:we,ElIcon:Me,...ke},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Te},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:t,zIndex:r,ns:l,size:o}=Se("message-box",S(()=>e.buttonSize)),{t:f}=t,{nextZIndex:m}=r,v=B(!1),s=Ie({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:m()}),y=S(()=>{const a=s.type;return{[l.bm("icon",a)]:a&&_[a]}}),K=x(),u=x(),de=S(()=>s.icon||_[s.type]||""),ce=S(()=>!!s.message),k=B(),G=B(),O=B(),P=B(),W=B(),fe=S(()=>s.confirmButtonClass);ee(()=>s.inputValue,async a=>{await R(),e.boxType==="prompt"&&a!==null&&Z()},{immediate:!0}),ee(()=>v.value,a=>{var C,T;a&&(e.boxType!=="prompt"&&(s.autofocus?O.value=(T=(C=W.value)==null?void 0:C.$el)!=null?T:k.value:O.value=k.value),s.zIndex=m()),e.boxType==="prompt"&&(a?R().then(()=>{var J;P.value&&P.value.$el&&(s.autofocus?O.value=(J=ve())!=null?J:k.value:O.value=k.value)}):(s.editorErrorMessage="",s.validateError=!1))});const me=S(()=>e.draggable);Ve(k,G,me),Oe(async()=>{await R(),e.closeOnHashChange&&window.addEventListener("hashchange",A)}),Ae(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",A)});function A(){v.value&&(v.value=!1,R(()=>{s.action&&n("action",s.action)}))}const X=()=>{e.closeOnClickModal&&D(s.distinguishCancelAndClose?"close":"cancel")},pe=Pe(X),ge=a=>{if(s.inputType!=="textarea")return a.preventDefault(),D("confirm")},D=a=>{var C;e.boxType==="prompt"&&a==="confirm"&&!Z()||(s.action=a,s.beforeClose?(C=s.beforeClose)==null||C.call(s,a,s,A):A())},Z=()=>{if(e.boxType==="prompt"){const a=s.inputPattern;if(a&&!a.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||f("el.messagebox.error"),s.validateError=!0,!1;const C=s.inputValidator;if(typeof C=="function"){const T=C(s.inputValue);if(T===!1)return s.editorErrorMessage=s.inputErrorMessage||f("el.messagebox.error"),s.validateError=!0,!1;if(typeof T=="string")return s.editorErrorMessage=T,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},ve=()=>{const a=P.value.$refs;return a.input||a.textarea},Y=()=>{D("close")},be=()=>{e.closeOnPressEscape&&Y()};return e.lockScroll&&$e(v),{...Re(s),ns:l,overlayEvent:pe,visible:v,hasMessage:ce,typeClass:y,contentId:K,inputId:u,btnSize:o,iconComponent:de,confirmButtonClasses:fe,rootRef:k,focusStartRef:O,headerRef:G,inputRef:P,confirmRef:W,doClose:A,handleClose:Y,onCloseRequested:be,handleWrapperClick:X,handleInputEnter:ge,handleAction:D,t:f}}}),We=["aria-label","aria-describedby"],Xe=["aria-label"],Ze=["id"];function Ye(e,n,t,r,l,o){const f=w("el-icon"),m=w("close"),v=w("el-input"),s=w("el-button"),y=w("el-focus-trap"),K=w("el-overlay");return p(),h(Le,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=u=>e.$emit("vanish")),persisted:""},{default:d(()=>[N(c(K,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:d(()=>[g("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:i(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...u)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...u)),onMousedown:n[9]||(n[9]=(...u)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...u)),onMouseup:n[10]||(n[10]=(...u)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...u))},[c(y,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:d(()=>[g("div",{ref:"rootRef",class:i([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ne(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=F(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(p(),z("div",{key:0,ref:"headerRef",class:i(e.ns.e("header"))},[g("div",{class:i(e.ns.e("title"))},[e.iconComponent&&e.center?(p(),h(f,{key:0,class:i([e.ns.e("status"),e.typeClass])},{default:d(()=>[(p(),h(U(e.iconComponent)))]),_:1},8,["class"])):I("v-if",!0),g("span",null,$(e.title),1)],2),e.showClose?(p(),z("button",{key:0,type:"button",class:i(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=H(F(u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[c(f,{class:i(e.ns.e("close"))},{default:d(()=>[c(m)]),_:1},8,["class"])],42,Xe)):I("v-if",!0)],2)):I("v-if",!0),g("div",{id:e.contentId,class:i(e.ns.e("content"))},[g("div",{class:i(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(p(),h(f,{key:0,class:i([e.ns.e("status"),e.typeClass])},{default:d(()=>[(p(),h(U(e.iconComponent)))]),_:1},8,["class"])):I("v-if",!0),e.hasMessage?(p(),z("div",{key:1,class:i(e.ns.e("message"))},[ze(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),h(U(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(p(),h(U(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:d(()=>[b($(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):I("v-if",!0)],2),N(g("div",{class:i(e.ns.e("input"))},[c(v,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=u=>e.inputValue=u),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:i({invalid:e.validateError}),onKeydown:H(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),g("div",{class:i(e.ns.e("errormsg")),style:ne({visibility:e.editorErrorMessage?"visible":"hidden"})},$(e.editorErrorMessage),7)],2),[[j,e.showInput]])],10,Ze),g("div",{class:i(e.ns.e("btns"))},[e.showCancelButton?(p(),h(s,{key:0,loading:e.cancelButtonLoading,class:i([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=u=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=H(F(u=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:d(()=>[b($(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):I("v-if",!0),N(c(s,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:i([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=u=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=H(F(u=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:d(()=>[b($(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[j,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,We)]),_:3},8,["z-index","overlay-class","mask"]),[[j,e.visible]])]),_:3})}var Je=Ce(Ge,[["render",Ye],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const L=new Map,Qe=e=>{let n=document.body;return e.appendTo&&(re(e.appendTo)&&(n=document.querySelector(e.appendTo)),te(e.appendTo)&&(n=e.appendTo),te(n)||(n=document.body)),n},_e=(e,n,t=null)=>{const r=c(Je,e,oe(e.message)||ie(e.message)?{default:oe(e.message)?e.message:()=>e.message}:null);return r.appContext=t,ue(r,n),Qe(e).appendChild(n.firstElementChild),r.component},xe=()=>document.createElement("div"),en=(e,n)=>{const t=xe();e.onVanish=()=>{ue(null,t),L.delete(l)},e.onAction=o=>{const f=L.get(l);let m;e.showInput?m={value:l.inputValue,action:o}:m=o,e.callback?e.callback(m,r.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?f.reject("close"):f.reject("cancel"):f.resolve(m)};const r=_e(e,t,n),l=r.proxy;for(const o in e)se(e,o)&&!se(l.$props,o)&&(l[o]=e[o]);return l.visible=!0,l};function V(e,n=null){if(!De)return Promise.reject();let t;return re(e)||ie(e)?e={message:e}:t=e.callback,new Promise((r,l)=>{const o=en(e,n??V._context);L.set(o,{options:e,callback:t,resolve:r,reject:l})})}const nn=["alert","confirm","prompt"],sn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};nn.forEach(e=>{V[e]=on(e)});function on(e){return(n,t,r,l)=>{let o="";return Fe(t)?(r=t,o=""):Ue(t)?o="":o=t,V(Object.assign({title:o,message:n,type:"",...sn[e]},r,{boxType:e}),l)}}V.close=()=>{L.forEach((e,n)=>{n.doClose()}),L.clear()};V._context=null;const E=V;E.install=e=>{E._context=e._context,e.config.globalProperties.$msgbox=E,e.config.globalProperties.$messageBox=E,e.config.globalProperties.$alert=E.alert,e.config.globalProperties.$confirm=E.confirm,e.config.globalProperties.$prompt=E.prompt};const tn=E,ln=le({name:"systemManageMenu",__name:"index",setup(e){const n=B(!1),t=B(!1),r={current:1,size:10},l=async()=>{const f=await Ne(r);je.success("请求成功"),console.log("res.data",f)},o=()=>{tn.alert("This is a message","Title",{confirmButtonText:"OK"})};return(f,m)=>{const v=w("el-checkbox"),s=w("el-button");return p(),z("div",null,[g("div",null,[c(v,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=y=>n.value=y),label:"Option 1",size:"large"},null,8,["modelValue"]),c(v,{modelValue:t.value,"onUpdate:modelValue":m[1]||(m[1]=y=>t.value=y),label:"Option 2",size:"large"},null,8,["modelValue"])]),c(s,{type:"primary",onClick:l},{default:d(()=>[b("测试")]),_:1}),c(s,{type:"primary",onClick:o},{default:d(()=>[b("测试2")]),_:1}),(p(),z(He,null,Ke(1e3,y=>g("div",null,"哈哈哈")),64)),c(s,{type:"primary"},{default:d(()=>[b("Primary")]),_:1}),c(s,{type:"success"},{default:d(()=>[b("Success")]),_:1}),c(s,{type:"info"},{default:d(()=>[b("Info")]),_:1}),c(s,{type:"warning"},{default:d(()=>[b("Warning")]),_:1}),c(s,{type:"danger"},{default:d(()=>[b("Danger")]),_:1})])}}});export{ln as default};
